[
    {
        "client_msg_id": "6cf2839a-199d-4a55-a541-eb203d271128",
        "type": "message",
        "text": "`質問`\nシェルでエスケープコード混りの文字で表示文字だけを取得する定番の方法ってなにがあるでしょう?\nrel <#CNX3F8RFC|dotfiles>",
        "user": "UAZ33BKV2",
        "ts": "1585731172.102200",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7MwDB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "質問",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nシェルでエスケープコード混りの文字で表示文字だけを取得する定番の方法ってなにがあるでしょう?\nrel "
                            },
                            {
                                "type": "channel",
                                "channel_id": "CNX3F8RFC"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "6473e18a-072d-4414-b20f-bd883a3168b7",
        "type": "message",
        "text": "PS1で右寄せするに表示文字数をカウントしたいのですが、文字数カウントが素の文字列(エスケープコードを含む)で処理してしまうので、これに表示文字列だけを入れたい",
        "user": "UAZ33BKV2",
        "ts": "1585731310.103700",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iPm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "PS1で右寄せするに表示文字数をカウントしたいのですが、文字数カウントが素の文字列(エスケープコードを含む)で処理してしまうので、これに表示文字列だけを入れたい"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "cf04986e-fdd8-4bff-8773-cdb6f4881245",
        "type": "message",
        "text": "`sed $'s|\\x1B\\\\[[0-9;]*[a-zA-Z]||g'` こういうやつですか",
        "user": "U7H4TJEG0",
        "ts": "1585731635.103900",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "g374ddea3465",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e374ddea34651a9a43de332bfcba64a3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png",
            "first_name": "",
            "real_name": "itchyny",
            "display_name": "itchyny",
            "team": "T03C4RC8V",
            "name": "itchyny",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "he6ig",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sed $'s|\\x1B\\\\[[0-9;]*[a-zA-Z]||g'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " こういうやつですか"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "aa40900f-6724-4866-9599-3985f53bd639",
        "type": "message",
        "text": "あー、直に除去するしかないかな...なるべく外部コマンド使わずに(shellはbash)すめばなと思いましたが",
        "user": "UAZ33BKV2",
        "ts": "1585732619.104600",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6+Dy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "あー、直に除去するしかないかな...なるべく外部コマンド使わずに(shellはbash)すめばなと思いましたが"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "3f5fa88b-0d53-4345-a80c-e5c60a5054d1",
        "type": "message",
        "text": "たぶん難しいですね（特にbashrcに記述するレベルのコマンドだと）。。。\nscriptコマンドとかでとったログのエスケープ文字とかも結局sedかperlで削除すること多いんで・・・",
        "user": "U7B4ZD49X",
        "ts": "1585732842.106300",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "7abadc2cdb88",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-11-03\/819248061205_7abadc2cdb885adbac35_72.png",
            "first_name": "",
            "real_name": "yutakatay",
            "display_name": "",
            "team": "T03C4RC8V",
            "name": "yutakatay",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8Y1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "たぶん難しいですね（特にbashrcに記述するレベルのコマンドだと）。。。\nscriptコマンドとかでとったログのエスケープ文字とかも結局sedかperlで削除すること多いんで・・・"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "d5e17a4b-3476-4491-a04f-0a5f89ebf785",
        "type": "message",
        "text": "そうですよね...\nありがとうございます。",
        "user": "UAZ33BKV2",
        "ts": "1585732901.106700",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UjGB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "そうですよね...\nありがとうございます。"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "acd632b1-094c-4b05-aa85-a88684337ff7",
        "type": "message",
        "text": "すでにご存知かもしれませんが ↓ の「カーソルの位置」のあたりとか参考になるでしょうか？\n<https:\/\/wiki.archlinux.jp\/index.php\/Bash\/%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA>\n\n```rightprompt()\n{\n    printf \"%*s\" $COLUMNS \"right prompt\"\n}\n\nexport PS1='\\[$(tput sc; rightprompt; tput rc)\\]left prompt &gt; '```\nPS1 では `\\[` `\\]` で囲まれている部分は non-printing characters となります文字数にカウントされません\n<https:\/\/www.tldp.org\/HOWTO\/Bash-Prompt-HOWTO\/bash-prompt-escape-sequences.html>",
        "user": "UF9UGV0C9",
        "ts": "1585766908.109300",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "dd542d5201f2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-03-22\/585354086471_dd542d5201f2874092dd_72.jpg",
            "first_name": "Takahashi",
            "real_name": "Takahashi Fumihiro",
            "display_name": "fumi",
            "team": "T03C4RC8V",
            "name": "fmr23s",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gGz4M",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "すでにご存知かもしれませんが ↓ の「カーソルの位置」のあたりとか参考になるでしょうか？\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/wiki.archlinux.jp\/index.php\/Bash\/%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA"
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "rightprompt()\n{\n    printf \"%*s\" $COLUMNS \"right prompt\"\n}\n\nexport PS1='\\[$(tput sc; rightprompt; tput rc)\\]left prompt > '"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nPS1 では "
                            },
                            {
                                "type": "text",
                                "text": "\\[",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " "
                            },
                            {
                                "type": "text",
                                "text": "\\]",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " で囲まれている部分は non-printing characters となります文字数にカウントされません\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.tldp.org\/HOWTO\/Bash-Prompt-HOWTO\/bash-prompt-escape-sequences.html"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "f404aeca-d8e9-4a04-a6ac-7cc444faeda6",
        "type": "message",
        "text": "ありがとうございます。\n一応知ってはいましたが、今抱えてる条件だとちょっと期待した結果にならない(出来ないというか)でした",
        "user": "UAZ33BKV2",
        "ts": "1585774484.112000",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A8W",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ありがとうございます。\n一応知ってはいましたが、今抱えてる条件だとちょっと期待した結果にならない(出来ないというか)でした"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "cry",
                "users": [
                    "UF9UGV0C9"
                ],
                "count": 1
            }
        ]
    },
    {
        "client_msg_id": "36523584-6655-4c68-866e-953001cf720e",
        "type": "message",
        "text": "オフィシャルなところで利用方法に制限付けてるし、たぶん無理だよな…",
        "user": "UAZ33BKV2",
        "ts": "1585774573.113700",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "ed16847a152d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2018-05-31\/373472791093_ed16847a152da533e013_72.png",
            "first_name": "",
            "real_name": "Tsuyoshi CHO",
            "display_name": "tsuyoshi_cho",
            "team": "T03C4RC8V",
            "name": "tsuyoshi_cho",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7KWQ4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "オフィシャルなところで利用方法に制限付けてるし、たぶん無理だよな…"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585786807.114000",
        "user": "U010WA6BZ6W",
        "text": "<@U010WA6BZ6W> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585786824.114300",
        "user": "U010Z8NDLTB",
        "text": "<@U010Z8NDLTB> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585786951.114600",
        "user": "U010XK12TEF",
        "text": "<@U010XK12TEF> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585787224.114900",
        "user": "U010Z92AN9F",
        "text": "<@U010Z92AN9F> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585787910.115200",
        "user": "U010WB2E7J6",
        "text": "<@U010WB2E7J6> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585787921.115500",
        "user": "U010Z9SJWTB",
        "text": "<@U010Z9SJWTB> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585788312.115800",
        "user": "U0119AFDQMN",
        "text": "<@U0119AFDQMN> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585789758.116100",
        "user": "U0119BYP6C8",
        "text": "<@U0119BYP6C8> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585793944.116400",
        "user": "U010XPVRPUK",
        "text": "<@U010XPVRPUK> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585796608.116700",
        "user": "U010XRFH7D1",
        "text": "<@U010XRFH7D1> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585797536.117000",
        "user": "U0119JRCU4Q",
        "text": "<@U0119JRCU4Q> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585799808.117300",
        "user": "U011AKJN7PZ",
        "text": "<@U011AKJN7PZ> has joined the channel"
    },
    {
        "type": "message",
        "subtype": "channel_join",
        "ts": "1585803954.117600",
        "user": "U011AKP3EPR",
        "text": "<@U011AKP3EPR> has joined the channel"
    },
    {
        "client_msg_id": "0f8f50a6-a34c-43f0-af1a-a65d420a6527",
        "type": "message",
        "text": "そうか、RPROMPTってzshだけか",
        "user": "UGXMRNBUM",
        "ts": "1585806102.118100",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "g162cc079f62",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9162cc079f6266ebd22e421799673eaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "kyoh86",
            "display_name": "kyoh86",
            "team": "T03C4RC8V",
            "name": "chili.pepper86",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7iFM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "そうか、RPROMPTってzshだけか"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "client_msg_id": "d411f468-b588-4724-b2e5-d74a2c7d81df",
        "type": "message",
        "text": "bash使ってた頃は、RLMでトライした覚えがあるけど、成功したかは覚えていない…",
        "user": "UGXMRNBUM",
        "ts": "1585806157.118800",
        "team": "T03C4RC8V",
        "user_team": "T03C4RC8V",
        "source_team": "T03C4RC8V",
        "user_profile": {
            "avatar_hash": "g162cc079f62",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9162cc079f6266ebd22e421799673eaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "kyoh86",
            "display_name": "kyoh86",
            "team": "T03C4RC8V",
            "name": "chili.pepper86",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "I0bk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "bash使ってた頃は、RLMでトライした覚えがあるけど、成功したかは覚えていない…"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]